{"ast":null,"code":"import _slicedToArray from\"D:/Code/React/react-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Img from\"../image1.jpg\";import{onSnapshot,doc}from\"firebase/firestore\";import{db}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var User=function User(_ref){var user1=_ref.user1,user=_ref.user,selectUser=_ref.selectUser,chat=_ref.chat;var user2=user===null||user===void 0?void 0:user.uid;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){var id=user1>user2?\"\".concat(user1+user2):\"\".concat(user2+user1);var unsub=onSnapshot(doc(db,\"lastMsg\",id),function(doc){setData(doc.data());});return function(){return unsub();};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_wrapper \".concat(chat.name===user.name&&\"selected_user\"),onClick:function onClick(){return selectUser(user);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_detail\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.avatar||Img,alt:\"avatar\",className:\"avatar\"}),/*#__PURE__*/_jsx(\"h4\",{children:user.name}),(data===null||data===void 0?void 0:data.from)!==user1&&(data===null||data===void 0?void 0:data.unread)&&/*#__PURE__*/_jsx(\"small\",{className:\"unread\",children:\"New\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"user_status \".concat(user.isOnline?\"online\":\"offline\")})]}),data&&/*#__PURE__*/_jsxs(\"p\",{className:\"truncate\",children:[/*#__PURE__*/_jsx(\"strong\",{children:data.from===user1?\"Me:\":null}),data.text]})]}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return selectUser(user);},className:\"sm_container \".concat(chat.name===user.name&&\"selected_user\"),children:/*#__PURE__*/_jsx(\"img\",{src:user.avatar||Img,alt:\"avatar\",className:\"avatar sm_screen\"})})]});};export default User;","map":{"version":3,"sources":["D:/Code/React/react-firebase/src/components/User.js"],"names":["React","useEffect","useState","Img","onSnapshot","doc","db","User","user1","user","selectUser","chat","user2","uid","data","setData","id","unsub","name","avatar","from","unread","isOnline","text"],"mappings":"mJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,GAAP,KAAgB,eAAhB,CACA,OAASC,UAAT,CAAqBC,GAArB,KAAgC,oBAAhC,CACA,OAASC,EAAT,KAAmB,aAAnB,C,6IAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAuC,IAApCC,CAAAA,KAAoC,MAApCA,KAAoC,CAA7BC,IAA6B,MAA7BA,IAA6B,CAAvBC,UAAuB,MAAvBA,UAAuB,CAAXC,IAAW,MAAXA,IAAW,CAClD,GAAMC,CAAAA,KAAK,CAAGH,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEI,GAApB,CACA,cAAwBX,QAAQ,CAAC,EAAD,CAAhC,wCAAOY,IAAP,eAAaC,OAAb,eAEAd,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,EAAE,CAAGR,KAAK,CAAGI,KAAR,WAAmBJ,KAAK,CAAGI,KAA3B,YAAwCA,KAAK,CAAGJ,KAAhD,CAAX,CACA,GAAIS,CAAAA,KAAK,CAAGb,UAAU,CAACC,GAAG,CAACC,EAAD,CAAK,SAAL,CAAgBU,EAAhB,CAAJ,CAAyB,SAACX,GAAD,CAAS,CACtDU,OAAO,CAACV,GAAG,CAACS,IAAJ,EAAD,CAAP,CACD,CAFqB,CAAtB,CAGA,MAAO,kBAAMG,CAAAA,KAAK,EAAX,EAAP,CACD,CANQ,CAMN,EANM,CAAT,CAQA,mBACE,wCACE,aACE,SAAS,wBAAkBN,IAAI,CAACO,IAAL,GAAcT,IAAI,CAACS,IAAnB,EAA2B,eAA7C,CADX,CAEE,OAAO,CAAE,yBAAMR,CAAAA,UAAU,CAACD,IAAD,CAAhB,EAFX,wBAIE,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,GAAG,CAAEA,IAAI,CAACU,MAAL,EAAehB,GAAzB,CAA8B,GAAG,CAAC,QAAlC,CAA2C,SAAS,CAAC,QAArD,EADF,cAEE,oBAAKM,IAAI,CAACS,IAAV,EAFF,CAGG,CAAAJ,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEM,IAAN,IAAeZ,KAAf,GAAwBM,IAAxB,SAAwBA,IAAxB,iBAAwBA,IAAI,CAAEO,MAA9B,gBACC,cAAO,SAAS,CAAC,QAAjB,iBAJJ,GADF,cAQE,YACE,SAAS,uBAAiBZ,IAAI,CAACa,QAAL,CAAgB,QAAhB,CAA2B,SAA5C,CADX,EARF,GAJF,CAgBGR,IAAI,eACH,WAAG,SAAS,CAAC,UAAb,wBACE,wBAASA,IAAI,CAACM,IAAL,GAAcZ,KAAd,CAAsB,KAAtB,CAA8B,IAAvC,EADF,CAEGM,IAAI,CAACS,IAFR,GAjBJ,GADF,cAwBE,YACE,OAAO,CAAE,yBAAMb,CAAAA,UAAU,CAACD,IAAD,CAAhB,EADX,CAEE,SAAS,wBAAkBE,IAAI,CAACO,IAAL,GAAcT,IAAI,CAACS,IAAnB,EAA2B,eAA7C,CAFX,uBAIE,YACE,GAAG,CAAET,IAAI,CAACU,MAAL,EAAehB,GADtB,CAEE,GAAG,CAAC,QAFN,CAGE,SAAS,CAAC,kBAHZ,EAJF,EAxBF,GADF,CAqCD,CAjDD,CAmDA,cAAeI,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Img from \"../image1.jpg\";\nimport { onSnapshot, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\n\nconst User = ({ user1, user, selectUser, chat }) => {\n  const user2 = user?.uid;\n  const [data, setData] = useState(\"\");\n\n  useEffect(() => {\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n    let unsub = onSnapshot(doc(db, \"lastMsg\", id), (doc) => {\n      setData(doc.data());\n    });\n    return () => unsub();\n  }, []);\n\n  return (\n    <>\n      <div\n        className={`user_wrapper ${chat.name === user.name && \"selected_user\"}`}\n        onClick={() => selectUser(user)}\n      >\n        <div className=\"user_info\">\n          <div className=\"user_detail\">\n            <img src={user.avatar || Img} alt=\"avatar\" className=\"avatar\" />\n            <h4>{user.name}</h4>\n            {data?.from !== user1 && data?.unread && (\n              <small className=\"unread\">New</small>\n            )}\n          </div>\n          <div\n            className={`user_status ${user.isOnline ? \"online\" : \"offline\"}`}\n          ></div>\n        </div>\n        {data && (\n          <p className=\"truncate\">\n            <strong>{data.from === user1 ? \"Me:\" : null}</strong>\n            {data.text}\n          </p>\n        )}\n      </div>\n      <div\n        onClick={() => selectUser(user)}\n        className={`sm_container ${chat.name === user.name && \"selected_user\"}`}\n      >\n        <img\n          src={user.avatar || Img}\n          alt=\"avatar\"\n          className=\"avatar sm_screen\"\n        />\n      </div>\n    </>\n  );\n};\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}